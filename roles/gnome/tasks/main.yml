---
- name: Turn off the Gnome beep sound
  command: >-
    bash -c "
      if [[ $(dconf read /org/gnome/desktop/sound/event-sounds) != \"false\" ]]; then
        dconf write /org/gnome/desktop/sound/event-sounds false
        echo "changed"
      fi"
  register: set_beep_sound_off
  changed_when: "'changed' in set_beep_sound_off.stdout"
  become: false

- name: Set wallpaper
  command: >-
    bash -c "
      if [[ -z $(dconf read /org/gnome/desktop/background/picture-uri) ]]; then
        dconf write /org/gnome/desktop/background/picture-uri \"'file://$PWD/roles/gnome/files/wallpaper.jpg'\"
        echo "changed"
      fi"
  register: set_wallpaper
  changed_when: "'changed' in set_wallpaper.stdout"
  become: false

- name: Specify the list view in nautilus
  command: >-
    bash -c "
      if [[ $(dconf read /org/gnome/nautilus/preferences/default-folder-viewer) != \"'list-view'\" ]]; then
        dconf write /org/gnome/nautilus/preferences/default-folder-viewer \"'list-view'\"
        echo "changed"
      fi"
  register: set_list_view
  changed_when: "'changed' in set_list_view.stdout"
  become: false

- name: Specify the default zoom level in nautilus
  command: >-
    bash -c "
      if [[ $(dconf read /org/gnome/nautilus/list-view/default-zoom-level) != \"'small'\" ]]; then
        dconf write /org/gnome/nautilus/list-view/default-zoom-level \"'small'\"
        echo "changed"
      fi"
  register: set_zoom_level
  changed_when: "'changed' in set_zoom_level.stdout"
  become: false

- name: Show hidden files in nautilus
  command: >-
    bash -c "
      if [[ $(dconf read /org/gtk/gtk4/settings/file-chooser/show-hidden) != \"true\" ]]; then
        dconf write /org/gtk/gtk4/settings/file-chooser/show-hidden true
        echo "changed"
      fi"
  register: set_show_hidden_files
  changed_when: "'changed' in set_show_hidden_files.stdout"
  become: false
